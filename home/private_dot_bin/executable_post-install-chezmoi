#!/usr/bin/env bash

if [ ! -f ~/.cargo/env ]; then
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
	source $HOME/.cargo/env
	cargo install ripgrep fd-find
	fd /root
fi

mkdir ~/.local/src || true
# SOURCE: https://www.reddit.com/r/neovim/comments/12x9bxs/nvim_install_script/
cd ~/.local/src
git clone https://github.com/ksk0/nvim-install || true
cd nvim-install
git checkout 29370c9b89963539bbe36ca1aa4cd1dbd1bcfb53 || true

# need nodejs
curl -fsSL https://raw.githubusercontent.com/tj/n/master/bin/n | bash -s lts
npm install -g n

# FIXME: Note, neovim for asdf doesn't work on arm machines yet.
# FIXME: You need to compile from SOURCE.
# root@015c8ffdc874 ~/.local/src/neovim tags/v0.9.0
# ‚ùØ history
#     1  ls ~/.cargo/env
#     2  \nif [ ! -f ~/.cargo/env ]; then\n curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y\n\tsource $HOME/.cargo/env\n\tcargo install ripgrep fd-find\n\tfd /root\nfi\n\nmkdir ~/.local/src || true\n#\ncd ~/.local/src\ngit clone https://github.com/ksk0/nvim-install || true\ncd nvim-install\ngit checkout 29370c9b89963539bbe36ca1aa4cd1dbd1bcfb53 || true\n\n#\ncurl -fsSL https://raw.githubusercontent.com/tj/n/master/bin/n | bash -s lts\nnpm install -g n
#     3  nvim
#     4  nvim --help
#     5  asdf uninstall neovim
#     6  asdf current
#     7  cd ..
#     8  gcl https://github.com/neovim/neovim
#     9  cd neovim
#    10  gco v0.9.0
#    11  make CMAKE_BUILD_TYPE=RelWithDebInfo
#    12  make install
#    13  nvim --version
#    14  nvim --version | grep 9


export LUNARVIM_LOG_LEVEL="debug"
LV_BRANCH='release-1.3/neovim-0.9' curl -s "https://raw.githubusercontent.com/LunarVim/LunarVim/${LV_BRANCH}/utils/installer/install.sh" | bash -s -- --install-dependencies -y

# UNCOMMENT THIS
# if we want to install via asdf
# SOURCE: https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally
# mkdir ~/.npm-global
# npm config set prefix '~/.npm-global'
# export PATH=~/.npm-global/bin:$PATH
# source ~/.profile
# npm install -g jshint
# NPM_CONFIG_PREFIX=~/.npm-global
